<!DOCTYPE html><html><head><title class="next-head">Mekpie</title><meta charSet="UTF-8" class="next-head"/><meta name="description" content="" class="next-head"/><meta name="keywords" content="" class="next-head"/><meta name="author" content="Eric Buss" class="next-head"/><meta name="viewport" content="width=device-width, initial-scale=1.0" class="next-head"/><link rel="shortcut icon" href="/mekpie/static/favicon.ico" class="next-head"/><link rel="stylesheet" href="/static/css/github.css" class="next-head"/><link rel="stylesheet" href="/static/css/spectre.min.css" class="next-head"/><link rel="stylesheet" href="/static/css/spectre-exp.min.css" class="next-head"/><link rel="stylesheet" href="/static/css/font-awesome.min.css" class="next-head"/><link rel="stylesheet" href="/static/css/animate.css" class="next-head"/><script src="/static/js/es5-shim.min.js" class="next-head"></script><script src="/static/js/es6-shim.min.js" class="next-head"></script><script src="/static/js/object-shim.js" class="next-head"></script><link rel="preload" href="/mekpie/_next/static/TtB1ITkXrld9Z3F_f4lQy/pages/index.js" as="script"/><link rel="preload" href="/mekpie/_next/static/TtB1ITkXrld9Z3F_f4lQy/pages/_app.js" as="script"/><link rel="preload" href="/mekpie/_next/static/TtB1ITkXrld9Z3F_f4lQy/pages/_error.js" as="script"/><link rel="preload" href="/mekpie/_next/static/runtime/webpack-f4542de9ce6104e90191.js" as="script"/><link rel="preload" href="/mekpie/_next/static/chunks/commons.b106c681488ececd8e82.js" as="script"/><link rel="preload" href="/mekpie/_next/static/chunks/styles.0520cfde98fd501288ce.js" as="script"/><link rel="preload" href="/mekpie/_next/static/runtime/main-cf4a6143092b313b88d6.js" as="script"/><link rel="stylesheet" href="/mekpie/_next/static/css/styles.f618cf49.chunk.css"/></head><body><div id="__next"><div id="page"><header class="navbar"><div class="scroll-marker" style="width:NaN%"></div><section class="navbar-section container grid-md"><div class="left"><a class="m-md active" href="/mekpie/index/"><i class="fas fa-home"></i>Home</a></div><div class="fill-width"><div class="float-right hide-xs text-sm center"><input type="text" placeholder="Type to search..." value="" class="closed"/><a class="p-md subtle-accent"><i class="fas fa-search fa-lg"></i></a><a target="_blank" href="https://github.com/ejrbuss/mekpie" class="p-md subtle-accent"><i class="fab fa-github fa-lg"></i></a></div><div class="search hide-xs text-sm "></div></div></section></header><div class="side-nav text-center hide-xl"><ul class="nav outer d-inline-block text-left"></ul></div><div class="search-results"><div class="container grid-md"></div></div><div class="content container grid-md docs"><div class="logo animated pulse"><svg version="1.1" viewBox="0 100 400 250" xmlns="http://www.w3.org/2000/svg"><path d="M0.000 200.000 L 0.000 400.000 200.000 400.000 L 400.000 400.000 400.000 200.000 L 400.000 0.000 200.000 0.000 L 0.000 0.000 0.000 200.000 M219.056 130.834 L 237.600 142.068 237.600 206.400 L 237.600 270.732 219.056 281.966 C 208.856 288.145,200.308 293.200,200.059 293.200 C 199.811 293.200,191.601 288.340,181.815 282.400 C 172.029 276.460,163.927 271.600,163.811 271.600 C 163.695 271.600,163.600 281.575,163.600 293.766 L 163.600 315.932 145.006 327.197 C 134.779 333.392,126.153 338.402,125.837 338.330 C 125.521 338.259,116.968 333.164,106.831 327.010 L 88.400 315.820 88.400 293.951 L 88.400 272.083 70.900 282.703 C 61.275 288.543,53.110 293.399,52.757 293.493 C 52.398 293.588,43.863 288.656,33.457 282.340 L 14.800 271.016 14.804 206.808 L 14.808 142.600 33.287 131.400 C 43.451 125.240,52.002 120.141,52.290 120.069 C 52.578 119.998,60.955 124.882,70.907 130.925 C 80.858 136.967,97.324 146.968,107.498 153.150 L 125.997 164.390 143.698 153.637 C 153.434 147.724,169.950 137.664,180.400 131.283 C 190.850 124.901,199.650 119.662,199.956 119.640 C 200.261 119.618,208.856 124.655,219.056 130.834 M275.600 192.000 L 275.600 195.600 269.000 195.600 L 262.400 195.600 262.400 199.400 L 262.400 203.200 268.815 203.200 L 275.230 203.200 275.115 206.818 L 275.000 210.437 268.800 210.518 L 262.600 210.600 262.485 214.300 L 262.370 218.000 268.985 218.000 L 275.600 218.000 275.600 221.800 L 275.600 225.600 264.800 225.600 L 254.000 225.600 254.000 207.000 L 254.000 188.400 264.800 188.400 L 275.600 188.400 275.600 192.000 M290.492 196.622 L 290.600 204.845 296.400 196.627 L 302.200 188.410 307.484 188.405 L 312.767 188.400 305.936 197.300 C 302.179 202.195,299.024 206.407,298.925 206.661 C 298.826 206.915,302.012 211.235,306.006 216.261 L 313.267 225.400 308.155 225.513 C 301.731 225.654,303.032 226.578,296.352 217.132 L 290.600 209.000 290.492 217.300 L 290.384 225.600 286.392 225.600 L 282.400 225.600 282.400 207.000 L 282.400 188.400 286.392 188.400 L 290.384 188.400 290.492 196.622 M334.626 189.156 C 343.937 193.385,343.879 207.533,334.535 211.456 C 333.603 211.847,331.310 212.182,328.700 212.307 L 324.400 212.513 324.400 219.057 L 324.400 225.600 320.408 225.600 L 316.416 225.600 316.308 207.000 L 316.200 188.400 324.600 188.409 C 331.901 188.416,333.213 188.514,334.626 189.156 M354.000 207.000 L 354.000 225.600 349.800 225.600 L 345.600 225.600 345.600 207.000 L 345.600 188.400 349.800 188.400 L 354.000 188.400 354.000 207.000 M382.400 192.000 L 382.400 195.600 375.600 195.600 L 368.800 195.600 368.800 199.400 L 368.800 203.200 375.200 203.200 L 381.600 203.200 381.600 206.900 L 381.600 210.600 375.300 210.600 L 369.000 210.600 368.885 214.290 L 368.770 217.981 375.485 218.090 L 382.200 218.200 382.315 221.900 L 382.430 225.600 371.623 225.600 L 360.816 225.600 360.708 207.000 L 360.600 188.400 371.500 188.400 L 382.400 188.400 382.400 192.000 M324.400 200.200 L 324.400 205.600 327.414 205.600 C 331.886 205.600,333.600 204.099,333.600 200.182 C 333.600 196.452,331.647 194.800,327.238 194.800 L 324.400 194.800 324.400 200.200 " stroke="none" fill="#ffffff" fill-rule="evenodd"></path><path d="M15.117 164.287 C 15.052 176.119,15.090 205.025,15.200 228.521 L 15.400 271.243 33.800 282.396 L 52.200 293.549 52.302 251.342 C 52.358 228.128,52.545 209.194,52.718 209.267 C 52.890 209.340,60.960 214.215,70.650 220.099 L 88.268 230.798 88.534 262.065 C 88.680 279.262,88.800 298.415,88.800 304.627 L 88.800 315.922 106.500 326.635 C 116.235 332.527,124.605 337.605,125.100 337.920 L 126.000 338.492 126.000 274.282 L 126.000 210.073 108.900 199.687 C 99.495 193.975,82.710 183.767,71.600 177.002 C 53.068 165.717,16.187 143.313,15.517 142.934 C 15.361 142.845,15.181 152.454,15.117 164.287 M181.696 219.900 L 163.593 230.873 163.696 251.100 L 163.800 271.326 181.800 282.238 L 199.800 293.150 199.904 271.944 C 199.960 260.281,199.960 241.331,199.904 229.833 L 199.800 208.926 181.696 219.900 " stroke="none" fill="#5270ff" fill-rule="evenodd"></path><path d="M218.000 154.076 C 207.550 160.458,191.440 170.273,182.200 175.887 C 172.960 181.502,163.960 187.032,162.200 188.175 C 160.440 189.319,151.577 194.743,142.505 200.228 L 126.010 210.200 126.005 274.300 C 126.002 309.555,126.115 338.400,126.256 338.400 C 126.396 338.400,134.856 333.345,145.056 327.166 L 163.600 315.932 163.607 293.666 C 163.611 281.420,163.608 262.282,163.600 251.139 L 163.586 230.877 181.693 219.902 L 199.800 208.927 199.902 251.063 C 199.958 274.238,200.118 293.200,200.258 293.200 C 200.397 293.200,208.856 288.145,219.056 281.966 L 237.600 270.732 237.600 206.566 C 237.600 171.275,237.465 142.417,237.300 142.437 C 237.135 142.457,228.450 147.695,218.000 154.076 M14.986 163.400 C 14.986 174.840,15.037 179.462,15.100 173.672 C 15.162 167.882,15.162 158.522,15.100 152.872 C 15.037 147.222,14.986 151.960,14.986 163.400 M14.993 228.800 C 14.993 252.230,15.041 261.815,15.100 250.100 C 15.159 238.385,15.159 219.215,15.100 207.500 C 15.041 195.785,14.993 205.370,14.993 228.800 M254.000 207.000 L 254.000 225.600 264.800 225.600 L 275.600 225.600 275.600 221.800 L 275.600 218.000 268.985 218.000 L 262.370 218.000 262.485 214.300 L 262.600 210.600 268.800 210.518 L 275.000 210.437 275.115 206.818 L 275.230 203.200 268.815 203.200 L 262.400 203.200 262.400 199.400 L 262.400 195.600 269.000 195.600 L 275.600 195.600 275.600 192.000 L 275.600 188.400 264.800 188.400 L 254.000 188.400 254.000 207.000 M282.400 207.000 L 282.400 225.600 286.392 225.600 L 290.384 225.600 290.492 217.300 L 290.600 209.000 296.352 217.132 C 303.032 226.578,301.731 225.654,308.155 225.513 L 313.267 225.400 306.006 216.261 C 302.012 211.235,298.826 206.915,298.925 206.661 C 299.024 206.407,302.179 202.195,305.936 197.300 L 312.767 188.400 307.484 188.405 L 302.200 188.410 296.400 196.627 L 290.600 204.845 290.492 196.622 L 290.384 188.400 286.392 188.400 L 282.400 188.400 282.400 207.000 M316.308 207.000 L 316.416 225.600 320.408 225.600 L 324.400 225.600 324.400 219.057 L 324.400 212.513 328.700 212.307 C 333.386 212.082,335.142 211.546,337.614 209.589 C 342.748 205.523,342.822 195.663,337.752 191.211 C 334.778 188.600,333.925 188.419,324.600 188.409 L 316.200 188.400 316.308 207.000 M345.600 207.000 L 345.600 225.600 349.800 225.600 L 354.000 225.600 354.000 207.000 L 354.000 188.400 349.800 188.400 L 345.600 188.400 345.600 207.000 M360.708 207.000 L 360.816 225.600 371.623 225.600 L 382.430 225.600 382.315 221.900 L 382.200 218.200 375.485 218.090 L 368.770 217.981 368.885 214.290 L 369.000 210.600 375.300 210.600 L 381.600 210.600 381.600 206.900 L 381.600 203.200 375.200 203.200 L 368.800 203.200 368.800 199.400 L 368.800 195.600 375.600 195.600 L 382.400 195.600 382.400 192.000 L 382.400 188.400 371.500 188.400 L 360.600 188.400 360.708 207.000 M331.184 195.454 C 334.331 197.313,334.480 202.945,331.435 204.941 C 330.725 205.406,329.540 205.600,327.414 205.600 L 324.400 205.600 324.400 200.200 L 324.400 194.800 327.238 194.800 C 329.148 194.800,330.439 195.014,331.184 195.454 M52.400 251.367 C 52.400 274.595,52.535 293.596,52.700 293.591 C 52.865 293.585,60.920 288.770,70.600 282.891 L 88.200 272.200 88.304 251.541 L 88.407 230.883 70.719 220.141 C 60.991 214.234,52.890 209.340,52.716 209.267 C 52.542 209.193,52.400 228.138,52.400 251.367 M88.587 294.200 C 88.587 306.300,88.637 311.308,88.700 305.328 C 88.762 299.349,88.762 289.449,88.700 283.328 C 88.638 277.208,88.587 282.100,88.587 294.200 " stroke="none" fill="#2db1ff" fill-rule="evenodd"></path><path d="M180.400 131.283 C 169.950 137.664,153.434 147.724,143.698 153.637 L 125.997 164.390 107.498 153.150 C 97.324 146.968,80.858 136.967,70.907 130.925 C 60.955 124.882,52.578 119.998,52.290 120.069 C 50.390 120.543,14.915 142.632,15.523 142.962 C 16.350 143.412,44.267 160.357,71.600 177.001 C 108.852 199.684,125.348 209.682,125.828 209.866 C 126.247 210.027,155.939 192.306,162.800 187.800 C 165.238 186.199,174.559 180.515,218.400 153.893 C 228.190 147.948,236.525 142.862,236.922 142.589 C 237.663 142.081,201.354 119.539,199.956 119.640 C 199.650 119.662,190.850 124.901,180.400 131.283 " stroke="none" fill="#ffbc49" fill-rule="evenodd"></path></svg></div><p class="text-center subtext p-md">v0.1.11</p><div class="text-center clr-accent subtitle"><div class="md indexable"><p>make building C as simple as pie</p></div></div><div class="md indexable"><p>Mekpie is an opinionated build system for small scale C projects. The core premise of Mekpie is that you should not be spending time worrying about Make files, compiler arguments, or build times, when working on a small C project. By enforcing a simple directory structure and always providing a clean build, Mekpie saves you time and effort. For added convenience Mekpie takes notes from tools like <a href="https://doc.rust-lang.org/cargo/guide/index.html">Rust&#x27;s cargo</a> and <a href="https://www.npmjs.com/">Node&#x27;s npm</a> and provides options for building, running, cleaning, and testing your current project.</p><p>Mekpie is a small-scale project and is not supposed to replace tools like <a href="https://cmake.org/">CMake</a> or provide any sort of package management capabilities. Use Mekpie when the alternative is a shoddy Make file or manually compiling.</p><p>Currently Mekpie supports the gcc, clang, avr-gcc, and emscripten compilers, as well as allows users to write custom compiler configurations.</p><a class="anchor-point" id="installing"></a><a class="anchor" href="#installing"><h1>Installing</h1><br/></a><p>Mekpie is a python package. Use pip to install it!</p><div class="editor"><div class="code" data-lang="shell"><div class="text"><pre><span class="hljs-meta">$</span><span class="bash"> pip install mekpie</span></pre></div></div></div><a class="anchor-point" id="gettingstarted"></a><a class="anchor" href="#gettingstarted"><h1>Getting Started</h1><br/></a><p>Create a new project by running <code>mekpie new</code>. Mekpie will walk you through the configuration.</p><div class="editor"><div class="code" data-lang="shell"><div class="text"><pre><span class="hljs-meta">$</span><span class="bash"> mekpie new <span class="hljs-string">"project-name"</span></span>
┌ Configuring mekpie...
│ Please provide a name for your project (default project-name):
│ Selected project-name.
│ Mekpie supports the following c compilers, please select one (compilers must be installed separately):
│     - gcc_clang   for use with the gcc or clang compiler
│     - emscripten  for use with the emscripten c to js compiler
│     - avr_gcc     for use with avr-gcc and avrdude
│ Please select a cc (default gcc_clang):
│ Selected gcc_clang.
│ ┌ Configuring gcc_clang...
│ │ Please select a compiler command (default cc):
│ │ Selected cc.
│ │ Please select a debug command (default lldb):
│ │ Selected lldb.
│ └ gcc_clang configured!
└ mekpie configured!
project-name created successfully!</pre></div></div></div><p>Then navigate to the project directory and run</p><div class="editor"><div class="code" data-lang="shell"><div class="text"><pre><span class="hljs-meta">$</span><span class="bash"> mekpie run</span>
Project successfully cleaned.
Project successfully built. (0.060s)
Hello, World!</pre></div></div></div><p>That&#x27;s it!</p><a class="anchor-point" id="philosophy"></a><a class="anchor" href="#philosophy"><h1>Philosophy</h1><br/></a><p>Mekpie is built for the IDE free lifestyle. These days I do most of my development in <a href="https://code.visualstudio.com/">VSCode</a> regardless of language. As a consequence, I am often writing small scripts to build my projects. Mekpie evolved from a python script I used in place of a Make file for my c projects. Rather than continuing to rewrite the script for every new project I decided to package this functionality together. Mekpie emphasizes simplicity and correctness over performance. Unlike most c build tools, which focus a great deal of effort on partial compilation, Mekpie recompiles the entire project from scratch every time you build, run, or test. This means that code is always fresh, and you will never have to run <code>mekpie clean</code> (though you still can if you want to remove the executables). For small programs the overhead of starting up python will be comparatively slower than the actual compilation times, so I believe this approach is a suitable one for many projects.</p><a class="anchor-point" id="creatingaproject"></a><a class="anchor" href="#creatingaproject"><h1>Creating a Project</h1><br/></a><p>Mekpie provides two commands for creating a project. <code>mekpie new</code> will attempt to create a new project as a subdirectory of your current location. You will have to provide Mekpie a name for your project. This name will be used as the name for the directory as well as the main <code>.c</code> file (don&#x27;t worry you can change that later).</p><p>Alternatively, you can use the <code>mekpie init</code> command to create a new project. In this case Mekpie will use the name of the current directory as the project name and setup the project in your current location. </p><a class="anchor-point" id="projectstructure"></a><a class="anchor" href="#projectstructure"><h1>Project Structure</h1><br/></a><p>When you create a project using either <code>new</code> or <code>init</code> the following directory structure will be generated.</p><div class="editor"><div class="code" data-lang=""><div class="text"><pre>project/
    target/
    includes/
    src/
        project-name.c
    tests/
    mek.py
    .gitignore</pre></div></div></div><p>The first folder generated by Mekpie, <code>target/</code>, is used to store the debug and release binaries generated for your program.</p><p>The <code>includes/</code> folder is automatically included as an includes directory to your compiler, so you can place any header files you want included in this directory. You can also place subdirectories within <code>includes/</code>.</p><p>The <code>src/</code> folder should contain all your <code>.c</code> files. Like <code>includes/</code> you can use subdirectories within. By default, a main file will be generated by Mekpie with a simple Hello World program to help you ensure everything is working correctly.</p><p>The <code>tests/</code> folder should contain all your test files. Jump <a href="#testing">here</a> to find out more about tests.</p><p>Mekpie automatically generates a <code>.gitignore</code>, or appends to one that already exists. The final file created by Mekpie is <code>mek.py</code> which is a small python file that allows you to configure Mekpie.</p><a class="anchor-point" id="configuration"></a><a class="anchor" href="#configuration"><h1>Configuration</h1><br/></a><p>Configuration of Mekpie is done through the python file <code>mek.py</code> in the root of your project directory. Mekpie will autogenerate a file like the following when you first create a project. Release and debug flags are also automatically generated based on the selected compiler configuration.</p><div class="editor"><div class="code" data-lang="python"><div class="gutter"><span class="line-number">1</span><span class="line-number">2</span><span class="line-number">3</span><span class="line-number">4</span><span class="line-number">5</span><span class="line-number">6</span><span class="line-number">7</span><span class="line-number">8</span><span class="line-number">9</span><span class="line-number">10</span><span class="line-number">11</span><span class="line-number">12</span></div><div class="text"><pre><span class="hljs-comment"># This is a standard configuration file for mekpie</span>

name = <span class="hljs-string">'project-name'</span> 
main = <span class="hljs-string">'project-name.c'</span>
cc = gcc_clang(cmd=<span class="hljs-string">'cc'</span>, dbg=<span class="hljs-string">'lldb'</span>)
libs = []
flags = []

<span class="hljs-keyword">if</span> options.release:
    flags += [<span class="hljs-string">'-Wall'</span>, <span class="hljs-string">'-O'</span>]
<span class="hljs-keyword">else</span>:
    flags += [<span class="hljs-string">'-Wall'</span>, <span class="hljs-string">'-g'</span>]</pre></div></div></div><p>As shown at the bottom of the configuration file, the command line options for the current build command will be provided to your configuration anytime it is read. This allows you to easily change your configuration depending on the build. In addition to release, the options object also provides <code>options.quiet</code>, <code>options.developer</code>, and <code>options.mode</code> which correspond to their respective command line flags.</p><p>The following table describes each <code>mek.py</code> variable in detail.</p><table class="table table-striped table-scroll"><thead><tr><th>Variable</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td><code>&lt;projectname&gt;</code></td><td>This is a default identifier for your project.</td></tr><tr><td><code>main</code></td><td><code>&lt;projectname&gt;.c</code></td><td>This should be the entry point for your main program. By default, it will point at the c file auto-generated by Mekpie.</td></tr><tr><td><code>cc</code></td><td><code>gcc_clang(...)</code></td><td>The c compiler configuration. Currently supported compilers include <code>gcc_clang</code>, <code>avr_gcc</code>, and <code>emscripten</code>. See <a href="#compilerconfiguration">Compiler Configurations</a> for more details.</td></tr><tr><td><code>libs</code></td><td><code>[]</code></td><td>Add any libraries you want linked with your project here. For instance, if you wanted to include the c math library you would change libs to <code>[&#x27;m&#x27;]</code>.</td></tr><tr><td><code>flags</code></td><td><code>[]</code></td><td>These flags will be passed to the compiler whenever a file is compiled. For instance, to always produce verbose output from the compiler, flags could be changed to <code>[-v]</code>.</td></tr><tr><td><code>compileflags</code></td><td><code>[]</code></td><td>These flags will <strong>only</strong> be passed to the compiler whenever an object is compiled.</td></tr><tr><td><code>linkflags</code></td><td><code>[]</code></td><td>These flags will <strong>only</strong> be passed to the compiler whenever a file is linked.</td></tr></tbody></table><a class="anchor-point" id="compilerconfiguration"></a><a class="anchor" href="#compilerconfiguration"><h1>Compiler Configuration</h1><br/></a><p>Mekpie provides three compiler configurations by default, <code>gcc_clang</code>, <code>gcc_avr</code>, and <code>emscripten</code>. The easiest way to get started with these is to use the configuration helper when running <code>mekpie new</code> or <code>mekpie init</code> and then selecting your desired compiler configuration, however these can be changed at any point.</p><a class="anchor-point" id="gcc_clang"></a><a class="anchor" href="#gcc_clang"><h2><code>gcc_clang</code></h2><br/></a><p>This compiler configuration is designed for use with the gcc compiler, clang compiler, and MinGW compiler. Insert the following code into <code>mek.py</code> to use this configuration</p><div class="editor"><div class="code" data-lang="python"><div class="gutter"><span class="line-number">1</span><span class="line-number">2</span><span class="line-number">3</span><span class="line-number">4</span></div><div class="text"><pre>cc = gcc_clang(
    cmd = <span class="hljs-string">'cc'</span>,  <span class="hljs-comment"># This shell command for your compiler</span>
    dbg = <span class="hljs-string">'gdb'</span>, <span class="hljs-comment"># This shell command for your debugger</span>
)</pre></div></div></div><a class="anchor-point" id="avr_gcc"></a><a class="anchor" href="#avr_gcc"><h2><code>avr_gcc</code></h2><br/></a><p>This compiler configuration is designed for use with the AVR gcc compiler and avrdude. It will automatically compiler your code, convert it to hex format, and upload it via a serial port on your computer to a desired piece of hardware. This compiler configuration expects <code>avr-gcc</code> and <code>avrdude</code> to be available from the command line. Insert the following code into <code>mek.py</code> to use this configuration</p><div class="editor"><div class="code" data-lang="python"><div class="gutter"><span class="line-number">1</span><span class="line-number">2</span><span class="line-number">3</span><span class="line-number">4</span><span class="line-number">5</span></div><div class="text"><pre>cc = avr_gcc(
    hardware   = <span class="hljs-string">'atmega2560'</span>, <span class="hljs-comment"># Your AVR hardware</span>
    programmer = <span class="hljs-string">'wiring'</span>,     <span class="hljs-comment"># The programmer to use with avrdude</span>
    baud       = <span class="hljs-string">'115200'</span>,     <span class="hljs-comment"># The upload baud rate (default 115200)</span>
)</pre></div></div></div><a class="anchor-point" id="emscripten"></a><a class="anchor" href="#emscripten"><h2><code>emscripten</code></h2><br/></a><p>This compiler configuration is designed for use with the Emscripten c to js compiler. It expects <code>emcc</code> and <code>node</code> to be available from the command line. Insert the following code into <code>mek.py</code> to use this configuration</p><div class="editor"><div class="code" data-lang="python"><div class="gutter"><span class="line-number">1</span></div><div class="text"><pre>cc = emscripten()</pre></div></div></div><a class="anchor-point" id="customconfiguration"></a><a class="anchor" href="#customconfiguration"><h2>Custom Configuration</h2><br/></a><p>There is currently limited support for providing your own compiler configuration. This is done by implementing the <code>CompilerConfig</code> interface. For example</p><div class="editor"><div class="code" data-lang="python"><div class="gutter"><span class="line-number">1</span><span class="line-number">2</span><span class="line-number">3</span><span class="line-number">4</span><span class="line-number">5</span><span class="line-number">6</span><span class="line-number">7</span><span class="line-number">8</span></div><div class="text"><pre>cc = CompilerConfig(
    name    = <span class="hljs-string">'my_compiler_config'</span>, <span class="hljs-comment"># The name of the config</span>
    compile = my_compiler_function, <span class="hljs-comment"># Your compile function</span>
    link    = my_link_function,     <span class="hljs-comment"># Your linking function</span>
    run     = my_run_function,      <span class="hljs-comment"># Your running function</span>
    debug   = my_debug_function,    <span class="hljs-comment"># Your debug function</span>
    once    = my_once_function,     <span class="hljs-comment"># Your once function</span>
)</pre></div></div></div><p>Each function is passed the relevant variables to complete its expected task. As this feature is still in early development full documentation is not provided. See <code>/mekpie/cc_gcc_clang.py</code> for an example implementation.</p><a class="anchor-point" id="running"></a><a class="anchor" href="#running"><h1>Running</h1><br/></a><p>Typically, you will skip running <code>mekpie build</code> when running your program, as building happens automatically for <code>mekpie run</code>, <code>mekpie debug</code>, and <code>mekpie test</code>. <code>mekpie run</code> will build and then execute the main file specified by your project <a href="#configuration">configuration</a>. You can specify a release build using <code>--release</code> or <code>-r</code>. You can provide program arguments to your main program by separating arguments to mekpie with <code>--</code>. Everything after this symbol will be passed to your program, rather than Mekpie. For example</p><div class="editor"><div class="code" data-lang="shell"><div class="text"><pre><span class="hljs-meta">$</span><span class="bash"> mekpie --release run -- ./some-path --flag 42</span></pre></div></div></div><p>Use <code>mekpie debug</code> if you want to start your program in your configured debugger. The usage of <code>mekpie test</code> is broken down in the next section.</p><a class="anchor-point" id="testing"></a><a class="anchor" href="#testing"><h1>Testing</h1><br/></a><p>Mekpie provides simple facilities for testing your code. Add a test by placing a <code>.c</code> file, with a main function, in <code>tests/</code>. For example, if you created a test file like the following and placed it in a file named <code>project-tests.c</code></p><div class="editor"><div class="code" data-lang="c"><div class="gutter"><span class="line-number">1</span><span class="line-number">2</span><span class="line-number">3</span><span class="line-number">4</span><span class="line-number">5</span><span class="line-number">6</span><span class="line-number">7</span><span class="line-number">8</span><span class="line-number">9</span><span class="line-number">10</span></div><div class="text"><pre><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    test_one();
    test_two();
    test_three();
    ...
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_one</span><span class="hljs-params">()</span> </span>{
    assert ...
}</pre></div></div></div><p>You could run those tests with either of the following commands</p><div class="editor"><div class="code" data-lang="shell"><div class="text"><pre><span class="hljs-meta">$</span><span class="bash"> mekpie <span class="hljs-built_in">test</span></span>
<span class="hljs-meta">$</span><span class="bash"> mekpie <span class="hljs-built_in">test</span> project-tests</span></pre></div></div></div><p>You can provide any number of test names to the test command. All of these tests will be run. Alternatively, providing no test names will simply run all of the tests. Test files are compiled just like your program&#x27;s main file, meaning they have access to all of your project&#x27;s header files.</p><a class="anchor-point" id="commands"></a><a class="anchor" href="#commands"><h1>Commands</h1><br/></a><p>Note that in usage examples flags are provided before the command, however flags are not required to appear before a command unless that command takes an arbitrary number of arguments, such as <code>mekpie test</code> which accepts any number of test names. </p><a class="anchor-point" id="new"></a><a class="anchor" href="#new"><h2><code>new</code></h2><br/></a><p>Creates a new project in a subdirectory of the provided name. The command will fail if the subdirectory already exists. If you want to initialize Mekpie in an already created directory us <code>mekpie init</code> instead. </p><p>This command will create all of the necessary files to use <code>mekpie run</code> to build and run a simple Hello World program in c.</p><p>Usage</p><div class="editor"><div class="code" data-lang="shell"><div class="text"><pre><span class="hljs-meta">$</span><span class="bash"> mekpie [--changedir|--developer] new &lt;project-name&gt;</span></pre></div></div></div><a class="anchor-point" id="init"></a><a class="anchor" href="#init"><h2><code>init</code></h2><br/></a><p>Behaves just like <code>mekpie new</code> accept initializes the project in the current directory. The current directory&#x27;s name will be used as the project name.</p><p>Usage</p><div class="editor"><div class="code" data-lang="shell"><div class="text"><pre><span class="hljs-meta">$</span><span class="bash"> mekpie [--changedir|--developer] init</span></pre></div></div></div><a class="anchor-point" id="test"></a><a class="anchor" href="#test"><h2><code>test</code></h2><br/></a><p>When no test names are provided this command will run all files contained in <code>tests/</code>. If test names are provided only those test files whose names are included will be run. Any number of test names can be provided.</p><p>Usage</p><div class="editor"><div class="code" data-lang="shell"><div class="text"><pre><span class="hljs-meta">$</span><span class="bash"> mekpie [--release|--quiet|--changedir|--developer] <span class="hljs-built_in">test</span> [<span class="hljs-built_in">test</span>-names...]</span></pre></div></div></div><a class="anchor-point" id="clean"></a><a class="anchor" href="#clean"><h2><code>clean</code></h2><br/></a><p>Removes all existing executables from <code>target/</code>.</p><p>Usage</p><div class="editor"><div class="code" data-lang="shell"><div class="text"><pre><span class="hljs-meta">$</span><span class="bash"> mekpie [--changedir|--developer] clean</span></pre></div></div></div><a class="anchor-point" id="build"></a><a class="anchor" href="#build"><h2><code>build</code></h2><br/></a><p>Attempts to create an executable in <code>target/</code>.</p><p>Usage</p><div class="editor"><div class="code" data-lang="shell"><div class="text"><pre><span class="hljs-meta">$</span><span class="bash"> mekpie [--release|--quiet|--changedir|--developer|--mode] build</span></pre></div></div></div><a class="anchor-point" id="run"></a><a class="anchor" href="#run"><h2><code>run</code></h2><br/></a><p>Cleans, builds, and then runs the main file of the project. The main file of a project is specified in the project configuration.</p><p>Usage</p><div class="editor"><div class="code" data-lang="shell"><div class="text"><pre><span class="hljs-meta">$</span><span class="bash"> mekpie [--release|--quiet|--changedir|--developer|--mode] run</span></pre></div></div></div><a class="anchor-point" id="debug"></a><a class="anchor" href="#debug"><h2><code>debug</code></h2><br/></a><p>Cleans, builds, and then runs the debugger on the main file of the project.</p><p>Usage</p><div class="editor"><div class="code" data-lang="shell"><div class="text"><pre><span class="hljs-meta">$</span><span class="bash"> mekpie [--quiet|--changedir|--developer|--mode] debug</span></pre></div></div></div><a class="anchor-point" id="dist"></a><a class="anchor" href="#dist"><h2><code>dist</code></h2><br/></a><p>Cleans, builds, and then copies an executable into the project root. The executable will be given the same name as the project.</p><p>Usage</p><div class="editor"><div class="code" data-lang="shell"><div class="text"><pre><span class="hljs-meta">$</span><span class="bash"> mekpie [--release|--quite|--changdir|--developer|--mode] dist</span></pre></div></div></div><a class="anchor-point" id="options"></a><a class="anchor" href="#options"><h1>Options</h1><br/></a><p>The following table describes Mekpie&#x27;s command line options.</p><table class="table table-striped table-scroll"><thead><tr><th>Option</th><th>Flag</th><th>Description</th></tr></thead><tbody><tr><td><code>help</code></td><td><code>-h</code></td><td>Displays a command line usage help message.</td></tr><tr><td><code>version</code></td><td><code>-V</code></td><td>Prints version info and exits.</td></tr><tr><td><code>mode</code></td><td><code>-m</code></td><td>Provide a mode to the mekpie file.</td></tr><tr><td><code>quiet</code></td><td><code>-q</code></td><td>This will suppress information from being printed to stdout.</td></tr><tr><td><code>release</code></td><td><code>-r</code></td><td>When applicable the build will be done with the release configuration. By default, builds are done with the debug configuration.</td></tr><tr><td><code>developer</code></td><td><code>-d</code></td><td>Runs Mekpie in developer mode. This produces additional logging and stack traces on errors.</td></tr><tr><td><code>changedir</code></td><td><code>-c</code></td><td>Runs Mekpie command as if it had been invoked from the provided directory. Provide a path immediately after this flag.</td></tr></tbody></table><a class="anchor-point" id="contact"></a><a class="anchor" href="#contact"><h1>Contact</h1><br/></a><p>Feel free to send be bug reports or feature requests. If you are interested in my other work, checkout my <a href="https://ejrbuss.net">website</a>.</p><p>Email root@ejrbuss.net</p></div></div></div><footer><div class="container grid-md"><div class="columns"><div class="column col-3 hide-sm"><a target="_blank" href="https://www.linkedin.com/in/ejrbuss/" class="p-md subtle"><i class="fab fa-linkedin-in fa-lg"></i></a><a target="_blank" href="https://github.com/ejrbuss" class="p-md subtle"><i class="fab fa-github fa-lg"></i></a><a target="_blank" href="https://twitter.com/ejrbuss" class="p-md subtle"><i class="fab fa-twitter fa-lg"></i></a></div><div class="column col-6 col-sm-12"><p class="text-center subtext">Built with <i class="fas fa-heart clr-accent"></i> using <a target="_blank" href="https://nextjs.org/" class="subtle">Nextjs</a>, <a target="_blank" href="https://picturepan2.github.io/spectre/index.html" class="subtle">Spectre.css</a>, &amp; <a target="_blank" href="/blog/site-history" class="subtle">More</a></p></div><div class="column col-3 hide-sm"><p class="text-right subtext">© <a href="https://ejrbuss.net">ejrbuss</a> 2019</p></div></div></div></footer></div><script>__NEXT_DATA__ = {"props":{"pageProps":{}},"page":"/index","query":{},"buildId":"TtB1ITkXrld9Z3F_f4lQy","assetPrefix":"/mekpie","nextExport":true};__NEXT_LOADED_PAGES__=[];__NEXT_REGISTER_PAGE=function(r,f){__NEXT_LOADED_PAGES__.push([r, f])}</script><script async="" id="__NEXT_PAGE__/index" src="/mekpie/_next/static/TtB1ITkXrld9Z3F_f4lQy/pages/index.js"></script><script async="" id="__NEXT_PAGE__/_app" src="/mekpie/_next/static/TtB1ITkXrld9Z3F_f4lQy/pages/_app.js"></script><script async="" id="__NEXT_PAGE__/_error" src="/mekpie/_next/static/TtB1ITkXrld9Z3F_f4lQy/pages/_error.js"></script><script src="/mekpie/_next/static/runtime/webpack-f4542de9ce6104e90191.js" async=""></script><script src="/mekpie/_next/static/chunks/commons.b106c681488ececd8e82.js" async=""></script><script src="/mekpie/_next/static/chunks/styles.0520cfde98fd501288ce.js" async=""></script><script src="/mekpie/_next/static/runtime/main-cf4a6143092b313b88d6.js" async=""></script></body></html>